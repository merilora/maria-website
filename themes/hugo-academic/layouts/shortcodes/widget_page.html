{{- $merge := dict "func" (printf "merge_%d" (now.UnixNano)) -}}
{{- $define := printf "func %s(a, b) dict { return dict(a, b) }" $merge.func | dict -}}
{{ $define | safeJS }}

{{- $params := call $merge.func $params (dict "page" $page) -}}

{{- if $page -}}
  {{- partial $widget $params -}}
{{- else -}}
  {{- errorf "Unable to find page for widget_page shortcode: %s" $params.page -}}
{{- end -}}

